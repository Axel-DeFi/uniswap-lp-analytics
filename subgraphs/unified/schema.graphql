# Minimal schema for pools and tokens (V3 & V4). We keep Pool mutable and Token immutable.

type Token @entity(immutable: true) {
  id: ID!                       # token address (lowercase)
  symbol: String
  name: String
  decimals: Int!
  chainId: Int!
  createdAtTimestamp: BigInt!
}

type Pool @entity(immutable: false) {
  id: ID!                       # V3: pool address; V4: bytes32 pool id
  version: Int!                 # 3 or 4
  chainId: Int!                 # 1 for Ethereum mainnet in this step
  token0: Token!                # relation to Token
  token1: Token!                # relation to Token
  feeTierBps: Int!              # uint24
  tickSpacing: Int!             # int24
  createdAtTimestamp: BigInt!
}

# Daily slice per pool. We'll fill metrics later (for now zeros).
type PoolDayData @entity(immutable: false) {
  id: ID!                       # "<poolId>-<dayId>"
  pool: Pool!
  date: Int!                    # dayId = timestamp / 86400 (UTC)
  volumeUSD: BigDecimal!        # initialized to 0
  feesUSD: BigDecimal!          # initialized to 0
  tvlUSD: BigDecimal!           # initialized to 0
}
